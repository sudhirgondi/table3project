<script type="text/javascript">
        $(document).ready(function(){
                $('#myTab a').click(function (e) {
                  e.preventDefault();
                  $(this).tab('show');
                });
        });
</script>

<h1 id="main_title">My Events Dashboard</h1>

<%= button_to 'Create an event', new_event_path, method: :get, class: 'btn btn-large btn-success' %>

<p class="notice"><%= flash[:notice] %></p>
<p class="error"><%= flash[:error] %></p>

</br>

<div class="span12">

	<ul id="myTab" class="nav nav-tabs">
        <li class="active"><a href="#my_events" data-toggle="tab"><h4>My Events</h4></a></li>
        <li><a href="#joined_events" data-toggle="tab"><h4>Events I've Joined</h4></a></li>
        <li><a href="#invited_to_events" data-toggle="tab"><h4>Events I'm Invited To</h4></a></li>
	</ul>

    <div id="myTabContent" class="tab-content">

        <div id="my_events" class="tab-pane active in">
            <table class="table table-striped">
                <tr class="my_row">
                    <th>Event Name</th>
                    <th>Interest</th>
                    <th>Created By</th>
                    <th>Description</th>
                    <th>Date and time</th>
                </tr>
                <% @my_events.each do |event| %>
                    <tr>
                        <td><a href="/events/<%= event['id'] %>"><%= event.name %></a></td>
                        <td><%= Interest.find(event.interest_id).name %></td>
                        <td><%= User.find(event.owner_user_id).first_name %> <%= User.find(event.owner_user_id).last_name %></td>
                        <td><%= event.description %></td>
                        <td><%= event.start_date.strftime('%a %b %d, %Y') %> <%= event.start_time.strftime('%H:%M %p') %></td>
                    </tr>
                <% end %>
            </table>
		</div>

        <div id="joined_events" class="tab-content tab-pane fade">
            <table class="table table-striped">
                <tr class="my_row">
                    <th>Event Name</th>
                    <th>Interest</th>
                    <th>Created By</th>
                    <th>Description</th>
                    <th>Date and time</th>
                </tr>
                <% @events.each do |event| %>
                    <tr>
                        <td><a href="/events/<%= event['id'] %>"><%= event.name %></a></td>
                        <td><%= Interest.find(event.interest_id).name %></td>
                        <td><%= User.find(event.owner_user_id).first_name %> <%= User.find(event.owner_user_id).last_name %></td>
                        <td><%= event.description %></td>
                        <td><%= event.start_date.strftime('%a %b %d, %Y') %> <%= event.start_time.strftime('%H:%M %p') %></td>
                    </tr>
                <% end %>
            </table>
        </div>

        <div id="invited_to_events" class="tab-content tab-pane fade">
            <table class="table table-striped">
                <tr class="my_row">
                    <th>Event Name</th>
                    <th>Interest</th>
                    <th>Created By</th>
                    <th>Description</th>
                    <th>Date and time</th>
                </tr>
                <% @events.each do |event| %>
                    <tr>
                        <td><a href="/events/<%= event['id'] %>"><%= event.name %></a></td>
                        <td><%= Interest.find(event.interest_id).name %></td>
                        <td><%= User.find(event.owner_user_id).first_name %> <%= User.find(event.owner_user_id).last_name %></td>
                        <td><%= event.description %></td>
                        <td><%= event.start_date.strftime('%a %b %d, %Y') %> <%= event.start_time.strftime('%H:%M %p') %></td>
                    </tr>
                <% end %>
            </table>
        </div>

    </div>
</div>